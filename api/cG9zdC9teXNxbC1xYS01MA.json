{"title":"MySQL 50题版本","date":"2019-01-28T15:01:53.000Z","slug":"mysql-qa-50","updated":"2019-01-28T15:10:32.330Z","content":"<h2 id=\"为什么会去做这套题\"><a href=\"#为什么会去做这套题\" class=\"headerlink\" title=\"为什么会去做这套题\"></a>为什么会去做这套题</h2><p>本着清杯心态.权当消遣娱乐.任何事物都有学习的一面.并且做到一半我发现这套题的难易程度还是做得很好的.</p>\n<h2 id=\"为什么会用-select\"><a href=\"#为什么会用-select\" class=\"headerlink\" title=\"为什么会用 select *\"></a>为什么会用 <code>select *</code></h2><p>因为是真的懒的打字. 不过有部分题目实现了多种方式,使用了些非常规办法.</p>\n<h2 id=\"是否做过调优\"><a href=\"#是否做过调优\" class=\"headerlink\" title=\"是否做过调优\"></a>是否做过调优</h2><p>没有.</p>\n<h2 id=\"题目来源\"><a href=\"#题目来源\" class=\"headerlink\" title=\"题目来源\"></a>题目来源</h2><p><code>google mysql 50题</code> 表列第一个\b. <a href=\"https://blog.csdn.net/fashion2014/article/details/78826299\" target=\"_blank\" rel=\"noopener\">传送门</a></p>\n<h2 id=\"这套题的小瑕疵\"><a href=\"#这套题的小瑕疵\" class=\"headerlink\" title=\"\b这套题的小瑕疵\"></a>\b这套题的小瑕疵</h2><ul>\n<li>题目分布不太合适.没有做出难易标记.(不过我也懒得做.相对要思索一下的是分组 TOP N 问题, 但是如果之前接触过类似的.\b就很容易写出来.)</li>\n<li>原答案部分有偷懒之嫌.没有把出题者的想要的 sql 写出来.</li>\n<li>表结构类型选择不当.</li>\n</ul>\n<h2 id=\"正文如下\"><a href=\"#正文如下\" class=\"headerlink\" title=\"正文如下\"></a>正文如下</h2><h3 id=\"1-查询”01”课程比”02”课程成绩高的学生的信息及课程分数\"><a href=\"#1-查询”01”课程比”02”课程成绩高的学生的信息及课程分数\" class=\"headerlink\" title=\"1. 查询”01”课程比”02”课程成绩高的学生的信息及课程分数\"></a>1. 查询”01”课程比”02”课程成绩高的学生的信息及课程分数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * <span class=\"keyword\">from</span> student s RIGHT JOIN (select * <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">'01'</span>) <span class=\"keyword\">as</span> a on s.s_id = a.s_id</span><br><span class=\"line\"> join (select * <span class=\"keyword\">from</span> score where c_id = <span class=\"string\">'02'</span>) <span class=\"keyword\">as</span> b on a.s_id = b.s_id where a.s_score &lt; b.s_score</span><br></pre></td></tr></table></figure>\n<h3 id=\"2-查询”01”课程比”02”课程成绩低的学生的信息及课程分数\"><a href=\"#2-查询”01”课程比”02”课程成绩低的学生的信息及课程分数\" class=\"headerlink\" title=\"2. 查询”01”课程比”02”课程成绩低的学生的信息及课程分数\"></a>2. 查询”01”课程比”02”课程成绩低的学生的信息及课程分数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span></span><br><span class=\"line\">(select * <span class=\"keyword\">from</span> score where c_id = <span class=\"string\">'01'</span>) a</span><br><span class=\"line\">left join </span><br><span class=\"line\">(select * <span class=\"keyword\">from</span> score where c_id = <span class=\"string\">'02'</span>) b</span><br><span class=\"line\">on a.s_id = b.s_id where a.s_score &gt; b.s_score</span><br></pre></td></tr></table></figure>\n<h3 id=\"3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩\"><a href=\"#3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩\" class=\"headerlink\" title=\"3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩\"></a>3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (select s_id,ROUND(AVG(s_score)) <span class=\"keyword\">as</span> avg_score <span class=\"keyword\">from</span> score GROUP BY s_id HAVING avg_score &gt; <span class=\"number\">60</span>) score01  JOIN student</span><br><span class=\"line\">on score01.s_id = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩-包括有成绩的和无成绩的\"><a href=\"#4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩-包括有成绩的和无成绩的\" class=\"headerlink\" title=\"4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩 (包括有成绩的和无成绩的)\"></a>4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩 (包括有成绩的和无成绩的)</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * <span class=\"keyword\">from</span> student left join </span><br><span class=\"line\">(SELECT s_id, AVG(s_score) avgs <span class=\"keyword\">from</span> score GROUP BY s_id) <span class=\"keyword\">as</span> score01</span><br><span class=\"line\">on student.s_id = score01.s_id where score01.avgs &lt; <span class=\"number\">60</span> or score01.avgs is NULL</span><br></pre></td></tr></table></figure>\n<h3 id=\"5-查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩\"><a href=\"#5-查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩\" class=\"headerlink\" title=\"5. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩\"></a>5. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT student.s_id, student.s_name, count(course.c_id), sum(s_score) <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id</span><br><span class=\"line\">left join course on score.c_id = course.c_id GROUP BY student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"6-查询”李”姓老师的数量\"><a href=\"#6-查询”李”姓老师的数量\" class=\"headerlink\" title=\"6.查询”李”姓老师的数量\"></a>6.查询”李”姓老师的数量</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select t_name,count(<span class=\"number\">1</span>) <span class=\"keyword\">from</span> teacher where t_name like <span class=\"string\">'李%'</span> GROUP BY t_name;</span><br></pre></td></tr></table></figure>\n<h3 id=\"7、查询学过”张三”老师授课的同学的信息\"><a href=\"#7、查询学过”张三”老师授课的同学的信息\" class=\"headerlink\" title=\"7、查询学过”张三”老师授课的同学的信息\"></a>7、查询学过”张三”老师授课的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (select * <span class=\"keyword\">from</span> teacher where t_name =<span class=\"string\">\"张三\"</span>) <span class=\"keyword\">as</span> t </span><br><span class=\"line\">LEFT JOIN course on t.t_id = course.t_id</span><br><span class=\"line\">left join score on course.c_id = score.c_id</span><br><span class=\"line\">left join student on score.s_id = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"8-查询没学过”张三”老师授课的同学的信息\"><a href=\"#8-查询没学过”张三”老师授课的同学的信息\" class=\"headerlink\" title=\"8. 查询没学过”张三”老师授课的同学的信息\"></a>8. 查询没学过”张三”老师授课的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (select * <span class=\"keyword\">from</span> teacher where t_name =<span class=\"string\">\"张三\"</span>) <span class=\"keyword\">as</span> t </span><br><span class=\"line\">LEFT JOIN course on t.t_id = course.t_id</span><br><span class=\"line\">left join score on course.c_id = score.c_id</span><br><span class=\"line\">right join student on score.s_id = student.s_id where t.t_id is NULL</span><br></pre></td></tr></table></figure>\n<h3 id=\"9-查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息\"><a href=\"#9-查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息\" class=\"headerlink\" title=\"9. 查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息\"></a>9. 查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (select * <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">\"01\"</span> )<span class=\"keyword\">as</span> c1 </span><br><span class=\"line\">join (select * <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">\"02\"</span>) <span class=\"keyword\">as</span> c2</span><br><span class=\"line\">on c1.s_id = c2.s_id</span><br><span class=\"line\">join student on c2.s_id  = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"10-查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息\"><a href=\"#10-查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息\" class=\"headerlink\" title=\"10. 查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息\"></a>10. 查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_id <span class=\"keyword\">in</span> (select s_id <span class=\"keyword\">from</span> score where c_id = <span class=\"string\">'01'</span>) and s_id </span><br><span class=\"line\">not <span class=\"keyword\">in</span> (select s_id <span class=\"keyword\">from</span> scoreWHERE c_id = <span class=\"string\">'02'</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"11-查询没有学全所有课程的同学的信息\"><a href=\"#11-查询没有学全所有课程的同学的信息\" class=\"headerlink\" title=\"11. 查询没有学全所有课程的同学的信息\"></a>11. 查询没有学全所有课程的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select student.s_id,student.s_name,count(student.s_id) c <span class=\"keyword\">from</span> student </span><br><span class=\"line\">left join score on student.s_id = score.s_id </span><br><span class=\"line\">group by student.s_id HAVING c &lt; (SELECT count(<span class=\"number\">1</span>) <span class=\"keyword\">from</span> course)</span><br></pre></td></tr></table></figure>\n<h3 id=\"12-查询至少有一门课与学号为”01”的同学所学相同的同学的信息\"><a href=\"#12-查询至少有一门课与学号为”01”的同学所学相同的同学的信息\" class=\"headerlink\" title=\"12. 查询至少有一门课与学号为”01”的同学所学相同的同学的信息\"></a>12. 查询至少有一门课与学号为”01”的同学所学相同的同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select ssss <span class=\"keyword\">from</span> (select s_id, c_id <span class=\"keyword\">from</span> score where s_id = <span class=\"string\">'01'</span>) c1\t</span><br><span class=\"line\">join (select s_id ssss, c_id <span class=\"keyword\">from</span> score where s_id &lt;&gt; <span class=\"string\">'01'</span>) c999 </span><br><span class=\"line\">on c1.c_id  = c999.c_id GROUP BY ssss</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_id</span><br><span class=\"line\"><span class=\"keyword\">in</span> (select s_id <span class=\"keyword\">from</span> score where c_id <span class=\"keyword\">in</span> (select c_id <span class=\"keyword\">from</span> score where s_id = <span class=\"string\">'01'</span>) and s_id &lt;&gt; <span class=\"string\">'01'</span> GROUP BY s_id)</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_id &lt;&gt; <span class=\"string\">'01'</span> and s_id <span class=\"keyword\">in</span> </span><br><span class=\"line\">(select s_id <span class=\"keyword\">from</span> score where s_id <span class=\"keyword\">in</span> (select s_id <span class=\"keyword\">from</span> score where c_id = <span class=\"string\">'01'</span>) GROUP BY s_id)</span><br></pre></td></tr></table></figure>\n<h3 id=\"13-查询和”01”号的同学学习的课程完全相同的其他同学的信息\"><a href=\"#13-查询和”01”号的同学学习的课程完全相同的其他同学的信息\" class=\"headerlink\" title=\"13 查询和”01”号的同学学习的课程完全相同的其他同学的信息\"></a>13 查询和”01”号的同学学习的课程完全相同的其他同学的信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_id <span class=\"keyword\">in</span> (</span><br><span class=\"line\">select s_id <span class=\"keyword\">from</span> (</span><br><span class=\"line\">select s_id, GROUP_CONCAT(c_id SEPARATOR <span class=\"string\">'-'</span>) <span class=\"keyword\">as</span> course_full_path <span class=\"keyword\">from</span> score GROUP BY s_id HAVING s_id &lt;&gt; <span class=\"string\">'01'</span> ) t</span><br><span class=\"line\">where course_full_path =</span><br><span class=\"line\">(select GROUP_CONCAT(c_id SEPARATOR <span class=\"string\">'-'</span>) <span class=\"keyword\">as</span> course_full_path <span class=\"keyword\">from</span> score where s_id = <span class=\"string\">'01'</span>))</span><br></pre></td></tr></table></figure>\n<h3 id=\"14、查询没学过”张三”老师讲授的任一门课程的学生姓名\"><a href=\"#14、查询没学过”张三”老师讲授的任一门课程的学生姓名\" class=\"headerlink\" title=\"14、查询没学过”张三”老师讲授的任一门课程的学生姓名\"></a>14、查询没学过”张三”老师讲授的任一门课程的学生姓名</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_id not <span class=\"keyword\">in</span></span><br><span class=\"line\">(select s_id <span class=\"keyword\">from</span> score where c_id  = </span><br><span class=\"line\">  (select c_id <span class=\"keyword\">from</span> course where t_id = </span><br><span class=\"line\">    (select t_id <span class=\"keyword\">from</span> teacher where t_name = <span class=\"string\">\"张三\"</span>)))</span><br></pre></td></tr></table></figure>\n<h3 id=\"15-查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩\"><a href=\"#15-查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩\" class=\"headerlink\" title=\"15 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩\"></a>15 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select student.s_id, student.s_name, AVG(score.s_score) <span class=\"keyword\">from</span> student </span><br><span class=\"line\">LEFT JOIN score on student.s_id = score.s_id</span><br><span class=\"line\">left JOIN course on score.c_id = course.c_id</span><br><span class=\"line\">where score.s_score &lt; <span class=\"number\">60</span></span><br><span class=\"line\">GROUP BY s_id HAVING s_id &gt; <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<p>16、检索”01”课程分数小于60，按分数降序排列的学生信息<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id where c_id = <span class=\"string\">'01'</span> and s_score &lt; <span class=\"number\">60</span></span><br></pre></td></tr></table></figure></p>\n<p>17、按平均成绩从高到低显示所有学生的所有课程的成绩以及平均成绩<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select s_id,</span><br><span class=\"line\">    (select s_score  <span class=\"keyword\">from</span> score where s_id=a.s_id and c_id=<span class=\"string\">'01'</span>)<span class=\"keyword\">as</span> <span class=\"string\">'语文'</span>,</span><br><span class=\"line\">    (select s_score  <span class=\"keyword\">from</span> score where s_id=a.s_id and c_id=<span class=\"string\">'02'</span>)<span class=\"keyword\">as</span> <span class=\"string\">'数学'</span>,</span><br><span class=\"line\">    (select s_score  <span class=\"keyword\">from</span> score where s_id=a.s_id and c_id=<span class=\"string\">'03'</span>)<span class=\"keyword\">as</span> <span class=\"string\">'英语'</span>,</span><br><span class=\"line\">    round(avg (s_score),<span class=\"number\">2</span>) <span class=\"keyword\">as</span> <span class=\"string\">'平均分'</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> score a group by s_id order by <span class=\"string\">'平均分'</span> desc</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select a.s_id, x.s_score a, y.s_score b, z.s_score z, ROUND(AVG(a.s_score)) avg_score <span class=\"keyword\">from</span> score a </span><br><span class=\"line\">left join (SELECT s_id, s_score <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">'01'</span>) x on a.s_id = x.s_id</span><br><span class=\"line\">left join (SELECT s_id, s_score <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">'02'</span>) y on a.s_id = y.s_id</span><br><span class=\"line\">left join (SELECT s_id, s_score <span class=\"keyword\">from</span> score where c_id=<span class=\"string\">'03'</span>) z on a.s_id = z.s_id</span><br><span class=\"line\">GROUP BY s_id</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set @sql = NULL;</span><br><span class=\"line\">  select GROUP_CONCAT(</span><br><span class=\"line\">    DISTINCT(</span><br><span class=\"line\">      CONCAT(<span class=\"string\">'(select s_score  from score where s_id=a.s_id and c_id= '</span>, c_id, <span class=\"string\">') as '</span>, <span class=\"string\">'`'</span>, c_name, <span class=\"string\">'`'</span>)</span><br><span class=\"line\">    )</span><br><span class=\"line\">  ) into @sql <span class=\"keyword\">from</span> course;</span><br><span class=\"line\">  </span><br><span class=\"line\">  set @sql = concat( <span class=\"string\">'select s_id, '</span>,@sql,<span class=\"string\">', round(avg (s_score),2) as pjf from score a group by s_id order by pjf desc'</span>);</span><br><span class=\"line\">  PREPARE stmt <span class=\"keyword\">from</span> @sql;</span><br><span class=\"line\">  EXECUTE stmt;</span><br></pre></td></tr></table></figure>\n<h3 id=\"18-查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率\"><a href=\"#18-查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率\" class=\"headerlink\" title=\"18.查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率\"></a>18.查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率</h3><p>及格为>=60，中等为：70-80，优良为：80-90，优秀为：>=90<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select </span><br><span class=\"line\">score.c_id <span class=\"keyword\">as</span> <span class=\"string\">`课程 ID`</span>, </span><br><span class=\"line\">course.c_name <span class=\"keyword\">as</span> <span class=\"string\">`课程名称`</span>,</span><br><span class=\"line\">max(s_score) <span class=\"keyword\">as</span> <span class=\"string\">`最高分`</span>, </span><br><span class=\"line\">min(s_score) <span class=\"keyword\">as</span> <span class=\"string\">`最低分`</span>, </span><br><span class=\"line\">round(AVG(s_score)) <span class=\"keyword\">as</span> <span class=\"string\">`平均分`</span> ,</span><br><span class=\"line\">round(sum(<span class=\"keyword\">case</span> when s_score&gt;=<span class=\"number\">60</span> then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)</span><br><span class=\"line\">round(sum(<span class=\"keyword\">case</span> when s_score&gt;=<span class=\"number\">60</span> then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)/sum(<span class=\"keyword\">case</span> when s_score then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end),<span class=\"number\">2</span>)<span class=\"string\">'及格率'</span>,</span><br><span class=\"line\">    round(sum(<span class=\"keyword\">case</span> when s_score&gt;=<span class=\"number\">70</span> and s_score&lt;<span class=\"number\">80</span> then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)/sum(<span class=\"keyword\">case</span> when s_score then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end),<span class=\"number\">2</span>)<span class=\"string\">'中等率'</span>,</span><br><span class=\"line\">    round(sum(<span class=\"keyword\">case</span> when s_score&gt;=<span class=\"number\">80</span> and s_score&lt;<span class=\"number\">90</span> then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)/sum(<span class=\"keyword\">case</span> when s_score then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end),<span class=\"number\">2</span>)<span class=\"string\">'优良率'</span>,</span><br><span class=\"line\">    round(sum(<span class=\"keyword\">case</span> when s_score&gt;=<span class=\"number\">90</span> then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)/(SUM(<span class=\"keyword\">case</span> when s_score then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end)),<span class=\"number\">2</span>)<span class=\"string\">'优秀率'</span></span><br><span class=\"line\"><span class=\"keyword\">from</span> score </span><br><span class=\"line\">LEFT JOIN course on score.c_id = course.c_id </span><br><span class=\"line\">GROUP BY score.c_id</span><br></pre></td></tr></table></figure></p>\n<p>19、按各科成绩进行排序，并显示排名 挪至用户定义变量使用部分. q.42 下面</p>\n<h3 id=\"20-查询学生的总成绩并进行排名\"><a href=\"#20-查询学生的总成绩并进行排名\" class=\"headerlink\" title=\"20 查询学生的总成绩并进行排名\"></a>20 查询学生的总成绩并进行排名</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select student.s_id, student.s_name, sum(s_score) <span class=\"keyword\">as</span> g  <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id GROUP BY student.s_id ORDER BY g desc</span><br></pre></td></tr></table></figure>\n<h3 id=\"21-查询不同老师所教不同课程平均分从高到低显示\"><a href=\"#21-查询不同老师所教不同课程平均分从高到低显示\" class=\"headerlink\" title=\"21 查询不同老师所教不同课程平均分从高到低显示\"></a>21 查询不同老师所教不同课程平均分从高到低显示</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select teacher.t_name, AVG(score.s_score) <span class=\"keyword\">from</span> teacher left join course on teacher.t_id = course.t_id left join score on course.c_id = score.c_id GROUP BY t_name</span><br></pre></td></tr></table></figure>\n<h3 id=\"22-查询所有课程的成绩第2名到第3名的学生信息及该课程成绩\"><a href=\"#22-查询所有课程的成绩第2名到第3名的学生信息及该课程成绩\" class=\"headerlink\" title=\"22 查询所有课程的成绩第2名到第3名的学生信息及该课程成绩\"></a>22 查询所有课程的成绩第2名到第3名的学生信息及该课程成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student left JOIN score on student.s_id = score.s_id left join course on score.c_id = course.c_id order by score.s_score desc LIMIT <span class=\"number\">1</span>, <span class=\"number\">2</span></span><br><span class=\"line\">slovtion <span class=\"number\">2</span></span><br><span class=\"line\">(SELECT * <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id where score.c_id = <span class=\"string\">'01'</span> ORDER BY score.s_score desc LIMIT <span class=\"number\">1</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">  UNION all</span><br><span class=\"line\">(SELECT * <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id where score.c_id = <span class=\"string\">'02'</span> ORDER BY score.s_score desc LIMIT <span class=\"number\">1</span>, <span class=\"number\">2</span>)</span><br><span class=\"line\">  union all</span><br><span class=\"line\">(SELECT * <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id where score.c_id = <span class=\"string\">'03'</span> ORDER BY score.s_score desc LIMIT <span class=\"number\">1</span>, <span class=\"number\">2</span>)</span><br></pre></td></tr></table></figure>\n<p>23 统计各科成绩各分数段人数：课程编号,课程名称,<a href=\"\">100-85</a>,<a href=\"\">85-70</a>,<a href=\"\">70-60</a>,<a href=\"\">0-60</a>及所占百分比<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select course.c_id, course.c_name ,</span><br><span class=\"line\">sum(<span class=\"keyword\">if</span>( score.s_score &lt; <span class=\"number\">60</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span> )) <span class=\"keyword\">as</span> <span class=\"string\">`[0-60]`</span>, </span><br><span class=\"line\">  round( sum(<span class=\"keyword\">if</span>( score.s_score &lt; <span class=\"number\">60</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>))  / sum( <span class=\"keyword\">if</span>(score.s_score, <span class=\"number\">1</span>, <span class=\"number\">0</span>)),<span class=\"number\">2</span> ) <span class=\"keyword\">as</span> rate1,</span><br><span class=\"line\">sum(<span class=\"keyword\">if</span>( score.s_score &gt; <span class=\"number\">60</span> and score.s_score &lt;= <span class=\"number\">80</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span> )) <span class=\"keyword\">as</span> <span class=\"string\">`[60-80]`</span>, </span><br><span class=\"line\">  round( sum(<span class=\"keyword\">if</span>( score.s_score &gt; <span class=\"number\">60</span> and score.s_score &lt;= <span class=\"number\">80</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>))  / sum( <span class=\"keyword\">if</span>(score.s_score, <span class=\"number\">1</span>, <span class=\"number\">0</span>)),<span class=\"number\">2</span> ) <span class=\"keyword\">as</span> rate2,</span><br><span class=\"line\">sum(<span class=\"keyword\">if</span>( score.s_score &gt; <span class=\"number\">80</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span> )) <span class=\"keyword\">as</span> <span class=\"string\">`[80-100]`</span>, </span><br><span class=\"line\">  round( sum(<span class=\"keyword\">if</span>( score.s_score &gt; <span class=\"number\">60</span>, <span class=\"number\">1</span>, <span class=\"number\">0</span>))  / sum( <span class=\"keyword\">if</span>(score.s_score, <span class=\"number\">1</span>, <span class=\"number\">0</span>)),<span class=\"number\">2</span> ) <span class=\"keyword\">as</span> rate3\t\t</span><br><span class=\"line\"><span class=\"keyword\">from</span> score LEFT JOIN course on score.c_id = course.c_id GROUP BY course.c_id</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"24-查询学生平均成绩及其名次\"><a href=\"#24-查询学生平均成绩及其名次\" class=\"headerlink\" title=\"24 查询学生平均成绩及其名次\"></a>24 查询学生平均成绩及其名次</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select *, @k := @k+<span class=\"number\">1</span> <span class=\"keyword\">as</span> rk <span class=\"keyword\">from</span> </span><br><span class=\"line\">(select s_name, avg(s_score) <span class=\"keyword\">as</span> grade <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id GROUP BY student.s_id ORDER BY grade desc) <span class=\"keyword\">as</span> subquery, (select @k := <span class=\"number\">0</span>) <span class=\"keyword\">as</span> t</span><br></pre></td></tr></table></figure>\n<h3 id=\"25、查询各科成绩前三名的记录\"><a href=\"#25、查询各科成绩前三名的记录\" class=\"headerlink\" title=\"25、查询各科成绩前三名的记录\"></a>25、查询各科成绩前三名的记录</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">(select * <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id where course.c_id = <span class=\"string\">'01'</span> ORDER BY score.s_score desc limit <span class=\"number\">0</span>,<span class=\"number\">3</span>)</span><br><span class=\"line\">UNION all </span><br><span class=\"line\">(select * <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id where course.c_id = <span class=\"string\">'02'</span> ORDER BY score.s_score desc limit <span class=\"number\">0</span>,<span class=\"number\">3</span>)</span><br><span class=\"line\">union all</span><br><span class=\"line\">(select * <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id where course.c_id = <span class=\"string\">'03'</span> ORDER BY score.s_score desc limit <span class=\"number\">0</span>,<span class=\"number\">3</span>)</span><br></pre></td></tr></table></figure>\n<h3 id=\"26-查询每门课程被选修的学生数-lt-60\"><a href=\"#26-查询每门课程被选修的学生数-lt-60\" class=\"headerlink\" title=\"26 查询每门课程被选修的学生数 \\&lt; 60\"></a>26 查询每门课程被选修的学生数 \\&lt; 60</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select course.c_id, course.c_name, count(<span class=\"number\">1</span>) <span class=\"keyword\">from</span> student left join score on student.s_id = score.s_id left join course on score.c_id = course.c_id where score.s_score &lt; <span class=\"number\">60</span> GROUP BY course.c_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"27-查询出只有两门课程的全部学生的学号和姓名\"><a href=\"#27-查询出只有两门课程的全部学生的学号和姓名\" class=\"headerlink\" title=\"27 查询出只有两门课程的全部学生的学号和姓名\"></a>27 查询出只有两门课程的全部学生的学号和姓名</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student RIGHT JOIN</span><br><span class=\"line\">(SELECT score.s_id <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id GROUP BY score.s_id HAVING count(course.c_id) = <span class=\"number\">2</span>) <span class=\"keyword\">as</span> t</span><br><span class=\"line\">on t.s_id = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"28-查询男生、女生人数\"><a href=\"#28-查询男生、女生人数\" class=\"headerlink\" title=\"28 查询男生、女生人数\"></a>28 查询男生、女生人数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select s_sex, count(*) <span class=\"keyword\">from</span> student GROUP BY s_sex</span><br></pre></td></tr></table></figure>\n<h3 id=\"29-查询名字中含有”风”字的学生信息\"><a href=\"#29-查询名字中含有”风”字的学生信息\" class=\"headerlink\" title=\"29 查询名字中含有”风”字的学生信息\"></a>29 查询名字中含有”风”字的学生信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_name like <span class=\"string\">'%风%'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"30-查询同名同性学生名单，并统计同名人数\"><a href=\"#30-查询同名同性学生名单，并统计同名人数\" class=\"headerlink\" title=\"30 查询同名同性学生名单，并统计同名人数\"></a>30 查询同名同性学生名单，并统计同名人数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select s_name, s_sex, count(*) <span class=\"keyword\">from</span> student GROUP BY s_name, s_sex HAVING count(<span class=\"number\">1</span>) &gt; <span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"31-查询1990年出生的学生名单\"><a href=\"#31-查询1990年出生的学生名单\" class=\"headerlink\" title=\"31 查询1990年出生的学生名单\"></a>31 查询1990年出生的学生名单</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where s_birth like <span class=\"string\">'1990%'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"32-查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列\"><a href=\"#32-查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列\" class=\"headerlink\" title=\"32 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列\"></a>32 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select AVG(s_score), course.c_name, course.c_id <span class=\"keyword\">from</span> score LEFT JOIN course on score.c_id = course.c_id GROUP BY course.c_id asc</span><br></pre></td></tr></table></figure>\n<h3 id=\"33-查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩\"><a href=\"#33-查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩\" class=\"headerlink\" title=\"33 查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩\"></a>33 查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student RIGHT JOIN (select s_id, a <span class=\"keyword\">from</span> (select s_id, AVG(s_score) <span class=\"keyword\">as</span> a <span class=\"keyword\">from</span> score GROUP BY s_id) t where t.a &gt;=<span class=\"number\">85</span>) g on g.s_id = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"34-查询课程名称为”数学”，且分数低于60的学生姓名和分数\"><a href=\"#34-查询课程名称为”数学”，且分数低于60的学生姓名和分数\" class=\"headerlink\" title=\"34 查询课程名称为”数学”，且分数低于60的学生姓名和分数\"></a>34 查询课程名称为”数学”，且分数低于60的学生姓名和分数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student RIGHT JOIN (select * <span class=\"keyword\">from</span> score where c_id = (select c_id <span class=\"keyword\">from</span> course where c_name = <span class=\"string\">\"数学\"</span>) and s_score &lt; <span class=\"number\">60</span> ) t on t.s_id = student.s_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"35-查询所有学生的课程及分数情况\"><a href=\"#35-查询所有学生的课程及分数情况\" class=\"headerlink\" title=\"35 查询所有学生的课程及分数情况\"></a>35 查询所有学生的课程及分数情况</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT * <span class=\"keyword\">from</span> student LEFT JOIN score on student.s_id = score.s_id LEFT JOIN course on score.c_id = course.c_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"36-查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数\"><a href=\"#36-查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数\" class=\"headerlink\" title=\"36 查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数\"></a>36 查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (SELECT student.s_name, course.c_name, score.s_score <span class=\"keyword\">from</span> student LEFT JOIN score on student.s_id = score.s_id LEFT JOIN course on score.c_id = course.c_id) <span class=\"keyword\">as</span> t where t.s_score &gt; <span class=\"number\">70</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"37-查询不及格的课程\"><a href=\"#37-查询不及格的课程\" class=\"headerlink\" title=\"37 查询不及格的课程\"></a>37 查询不及格的课程</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select course.c_id, course.c_name <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id where s_score &lt; <span class=\"number\">60</span> GROUP BY course.c_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"38-查询课程编号为01且课程成绩在80分以上的学生的学号和姓名\"><a href=\"#38-查询课程编号为01且课程成绩在80分以上的学生的学号和姓名\" class=\"headerlink\" title=\"38 查询课程编号为01且课程成绩在80分以上的学生的学号和姓名\"></a>38 查询课程编号为01且课程成绩在80分以上的学生的学号和姓名</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student RIGHT JOIN </span><br><span class=\"line\">(SELECT course.c_name, course.c_id, score.s_id <span class=\"keyword\">as</span> ssid <span class=\"keyword\">from</span> score left join course on score.c_id = course.c_id where score.s_score &gt; <span class=\"number\">80</span>  and course.t_id = <span class=\"string\">'01'</span>) t on student.s_id = t.ssid</span><br></pre></td></tr></table></figure>\n<p>39 求每门课程的学生人数<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select count(*), score.c_id <span class=\"keyword\">from</span> student right join score on student.s_id = score.s_id GROUP BY score.c_id</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"40-查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩\"><a href=\"#40-查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩\" class=\"headerlink\" title=\"40 查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩 !!!!!!!!\"></a>40 查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩 !!!!!!!!</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student </span><br><span class=\"line\">LEFT JOIN score on student.s_id = score.s_id </span><br><span class=\"line\">LEFT JOIN course on score.c_id = course.c_id </span><br><span class=\"line\">LEFT JOIN teacher on course.t_id = teacher.t_id </span><br><span class=\"line\">where teacher.t_name = <span class=\"string\">\"张三\"</span> </span><br><span class=\"line\">select a.* <span class=\"keyword\">from</span> score a left join score b on a.s_id = b.s_id and a.s_score &lt; b.s_score where b.s_id is NULL and a.c_id = <span class=\"string\">'01'</span></span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> score a </span><br><span class=\"line\">INNER JOIN </span><br><span class=\"line\">(select c_id, max(s_score) s_score <span class=\"keyword\">from</span> score GROUP BY c_id) b </span><br><span class=\"line\">on a.c_id = b.c_id and a.s_score = b.s_score and a.c_id = <span class=\"string\">'01'</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"41-查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩\"><a href=\"#41-查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩\" class=\"headerlink\" title=\"41 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩\"></a>41 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select  DISTINCT a.*  <span class=\"keyword\">from</span> score a, score b where a.s_score = b.s_score and a.c_id &lt;&gt; b.c_id</span><br></pre></td></tr></table></figure>\n<h3 id=\"42-查询每门课程成绩最好的前两名\"><a href=\"#42-查询每门课程成绩最好的前两名\" class=\"headerlink\" title=\"42 查询每门课程成绩最好的前两名\"></a>42 查询每门课程成绩最好的前两名</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> score a where ( select count(*) <span class=\"keyword\">from</span> score b where a.c_id=b.c_id and a.s_score &lt; b.s_score ) &lt; <span class=\"number\">3</span> order by c_id, s_score desc</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> (select c_id, s_score, @num := <span class=\"keyword\">if</span>(@c_id=c_id, @num+<span class=\"number\">1</span>, <span class=\"number\">1</span>) <span class=\"keyword\">as</span> row_number,</span><br><span class=\"line\">@c_id := c_id <span class=\"keyword\">as</span> dummy</span><br><span class=\"line\"><span class=\"keyword\">from</span> score,(select @num = <span class=\"number\">0</span>, @c_id:=<span class=\"string\">''</span>) <span class=\"keyword\">as</span> k  </span><br><span class=\"line\">GROUP BY c_id, s_id</span><br><span class=\"line\">HAVING row_number &lt;=<span class=\"number\">4</span></span><br><span class=\"line\">ORDER BY c_id, s_score desc) t where t.row_number &lt;<span class=\"number\">3</span></span><br></pre></td></tr></table></figure>\n<p>19、按各科成绩进行排序，并显示排名<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">set @rank_t := <span class=\"number\">0</span>, @course_t := <span class=\"string\">''</span>;</span><br><span class=\"line\">select s_id, c_id, s_score, </span><br><span class=\"line\">@rank_t := <span class=\"keyword\">if</span>( @course_t = c_id, @rank_t+<span class=\"number\">1</span>, <span class=\"number\">1</span>) <span class=\"keyword\">as</span> rank_current, </span><br><span class=\"line\">@course_t := c_id <span class=\"keyword\">as</span> course_current </span><br><span class=\"line\"><span class=\"keyword\">from</span> score t ORDER BY c_id, s_score desc</span><br></pre></td></tr></table></figure></p>\n<h3 id=\"43-统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列\"><a href=\"#43-统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列\" class=\"headerlink\" title=\"43 统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列\"></a>43 统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select c_id, count(*)  <span class=\"keyword\">as</span> t <span class=\"keyword\">from</span> score GROUP BY c_id HAVING t &gt; <span class=\"number\">5</span></span><br></pre></td></tr></table></figure>\n<p>44 检索至少选修两门课程的学生学号<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT s_id, count(*) <span class=\"keyword\">as</span> t <span class=\"keyword\">from</span> score GROUP BY s_id HAVING t &gt;<span class=\"number\">1</span></span><br></pre></td></tr></table></figure></p>\n<h3 id=\"45-查询选修了全部课程的学生信息\"><a href=\"#45-查询选修了全部课程的学生信息\" class=\"headerlink\" title=\"45 查询选修了全部课程的学生信息\"></a>45 查询选修了全部课程的学生信息</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">SELECT s_id, count(*) <span class=\"keyword\">as</span> t <span class=\"keyword\">from</span> score GROUP BY s_id HAVING t = (select count(*) <span class=\"keyword\">as</span> t <span class=\"keyword\">from</span> course)</span><br></pre></td></tr></table></figure>\n<h3 id=\"46-查询各学生的年龄\"><a href=\"#46-查询各学生的年龄\" class=\"headerlink\" title=\"46 查询各学生的年龄\"></a>46 查询各学生的年龄</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select s_id, s_name,(date_format(now(), <span class=\"string\">'%Y'</span>) - date_format(s_birth, <span class=\"string\">'%Y'</span>) - <span class=\"keyword\">case</span> when (date_format(now(), <span class=\"string\">'%m%d'</span>) &gt; date_format(s_birth, <span class=\"string\">'%m%d'</span>)) then <span class=\"number\">1</span> <span class=\"keyword\">else</span> <span class=\"number\">0</span> end) <span class=\"keyword\">as</span> age <span class=\"keyword\">from</span> student</span><br></pre></td></tr></table></figure>\n<h3 id=\"47-查询本周过生日的学生\"><a href=\"#47-查询本周过生日的学生\" class=\"headerlink\" title=\"47 查询本周过生日的学生\"></a>47 查询本周过生日的学生</h3><p><code>SHOW VARIABLES LIKE &#39;defaultweekformat&#39; default 0 from sunday,1 is from monday</code><br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where week(s_birth) = week(now())</span><br></pre></td></tr></table></figure></p>\n<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select week(now(),<span class=\"number\">1</span>), week(<span class=\"string\">'2020-01-01'</span>, <span class=\"number\">1</span>);</span><br></pre></td></tr></table></figure>\n<h3 id=\"48-查询下周过生日的学生\"><a href=\"#48-查询下周过生日的学生\" class=\"headerlink\" title=\"48 查询下周过生日的学生\"></a>48 查询下周过生日的学生</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where week(s_birth) = week(now())+<span class=\"number\">1</span></span><br></pre></td></tr></table></figure>\n<h3 id=\"49-查询本月过生日的学生\"><a href=\"#49-查询本月过生日的学生\" class=\"headerlink\" title=\"49 查询本月过生日的学生\"></a>49 查询本月过生日的学生</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where month(s_birth) = month(now())</span><br></pre></td></tr></table></figure>\n<h3 id=\"50-查询12月份过生日的学生\"><a href=\"#50-查询12月份过生日的学生\" class=\"headerlink\" title=\"50 查询12月份过生日的学生\"></a>50 查询12月份过生日的学生</h3><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">select * <span class=\"keyword\">from</span> student where MONTH(s_birth) = <span class=\"number\">12</span></span><br></pre></td></tr></table></figure>\n","next":{"title":"Javascript在异步中背后都做了什么","slug":"Javascript-Async-Generators"},"link":"http://yoursite.com/post/mysql-qa-50/","toc":[{"title":"为什么会去做这套题","id":"为什么会去做这套题","index":"1"},{"title":"为什么会用 <code>select *</code>","id":"为什么会用-select","index":"2"},{"title":"是否做过调优","id":"是否做过调优","index":"3"},{"title":"题目来源","id":"题目来源","index":"4"},{"title":"\b这套题的小瑕疵","id":"这套题的小瑕疵","index":"5"},{"title":"正文如下","id":"正文如下","index":"6","children":[{"title":"1. 查询”01”课程比”02”课程成绩高的学生的信息及课程分数","id":"1-查询”01”课程比”02”课程成绩高的学生的信息及课程分数","index":"6.1"},{"title":"2. 查询”01”课程比”02”课程成绩低的学生的信息及课程分数","id":"2-查询”01”课程比”02”课程成绩低的学生的信息及课程分数","index":"6.2"},{"title":"3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩","id":"3、查询平均成绩大于等于60分的同学的学生编号和学生姓名和平均成绩","index":"6.3"},{"title":"4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩 (包括有成绩的和无成绩的)","id":"4、查询平均成绩小于60分的同学的学生编号和学生姓名和平均成绩-包括有成绩的和无成绩的","index":"6.4"},{"title":"5. 查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩","id":"5-查询所有同学的学生编号、学生姓名、选课总数、所有课程的总成绩","index":"6.5"},{"title":"6.查询”李”姓老师的数量","id":"6-查询”李”姓老师的数量","index":"6.6"},{"title":"7、查询学过”张三”老师授课的同学的信息","id":"7、查询学过”张三”老师授课的同学的信息","index":"6.7"},{"title":"8. 查询没学过”张三”老师授课的同学的信息","id":"8-查询没学过”张三”老师授课的同学的信息","index":"6.8"},{"title":"9. 查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息","id":"9-查询学过编号为”01”并且也学过编号为”02”的课程的同学的信息","index":"6.9"},{"title":"10. 查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息","id":"10-查询学过编号为”01”但是没有学过编号为”02”的课程的同学的信息","index":"6.10"},{"title":"11. 查询没有学全所有课程的同学的信息","id":"11-查询没有学全所有课程的同学的信息","index":"6.11"},{"title":"12. 查询至少有一门课与学号为”01”的同学所学相同的同学的信息","id":"12-查询至少有一门课与学号为”01”的同学所学相同的同学的信息","index":"6.12"},{"title":"13 查询和”01”号的同学学习的课程完全相同的其他同学的信息","id":"13-查询和”01”号的同学学习的课程完全相同的其他同学的信息","index":"6.13"},{"title":"14、查询没学过”张三”老师讲授的任一门课程的学生姓名","id":"14、查询没学过”张三”老师讲授的任一门课程的学生姓名","index":"6.14"},{"title":"15 查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩","id":"15-查询两门及其以上不及格课程的同学的学号，姓名及其平均成绩","index":"6.15"},{"title":"18.查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率","id":"18-查询各科成绩最高分、最低分和平均分：以如下形式显示：课程ID，课程name，最高分，最低分，平均分，及格率，中等率，优良率，优秀率","index":"6.16"},{"title":"20 查询学生的总成绩并进行排名","id":"20-查询学生的总成绩并进行排名","index":"6.17"},{"title":"21 查询不同老师所教不同课程平均分从高到低显示","id":"21-查询不同老师所教不同课程平均分从高到低显示","index":"6.18"},{"title":"22 查询所有课程的成绩第2名到第3名的学生信息及该课程成绩","id":"22-查询所有课程的成绩第2名到第3名的学生信息及该课程成绩","index":"6.19"},{"title":"24 查询学生平均成绩及其名次","id":"24-查询学生平均成绩及其名次","index":"6.20"},{"title":"25、查询各科成绩前三名的记录","id":"25、查询各科成绩前三名的记录","index":"6.21"},{"title":"26 查询每门课程被选修的学生数 \\&lt; 60","id":"26-查询每门课程被选修的学生数-lt-60","index":"6.22"},{"title":"27 查询出只有两门课程的全部学生的学号和姓名","id":"27-查询出只有两门课程的全部学生的学号和姓名","index":"6.23"},{"title":"28 查询男生、女生人数","id":"28-查询男生、女生人数","index":"6.24"},{"title":"29 查询名字中含有”风”字的学生信息","id":"29-查询名字中含有”风”字的学生信息","index":"6.25"},{"title":"30 查询同名同性学生名单，并统计同名人数","id":"30-查询同名同性学生名单，并统计同名人数","index":"6.26"},{"title":"31 查询1990年出生的学生名单","id":"31-查询1990年出生的学生名单","index":"6.27"},{"title":"32 查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列","id":"32-查询每门课程的平均成绩，结果按平均成绩降序排列，平均成绩相同时，按课程编号升序排列","index":"6.28"},{"title":"33 查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩","id":"33-查询平均成绩大于等于85的所有学生的学号、姓名和平均成绩","index":"6.29"},{"title":"34 查询课程名称为”数学”，且分数低于60的学生姓名和分数","id":"34-查询课程名称为”数学”，且分数低于60的学生姓名和分数","index":"6.30"},{"title":"35 查询所有学生的课程及分数情况","id":"35-查询所有学生的课程及分数情况","index":"6.31"},{"title":"36 查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数","id":"36-查询任何一门课程成绩在70分以上的学生姓名、课程名称和分数","index":"6.32"},{"title":"37 查询不及格的课程","id":"37-查询不及格的课程","index":"6.33"},{"title":"38 查询课程编号为01且课程成绩在80分以上的学生的学号和姓名","id":"38-查询课程编号为01且课程成绩在80分以上的学生的学号和姓名","index":"6.34"},{"title":"40 查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩 !!!!!!!!","id":"40-查询选修”张三”老师所授课程的学生中，成绩最高的学生信息及其成绩","index":"6.35"},{"title":"41 查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩","id":"41-查询不同课程成绩相同的学生的学生编号、课程编号、学生成绩","index":"6.36"},{"title":"42 查询每门课程成绩最好的前两名","id":"42-查询每门课程成绩最好的前两名","index":"6.37"},{"title":"43 统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列","id":"43-统计每门课程的学生选修人数（超过5人的课程才统计）。要求输出课程号和选修人数，查询结果按人数降序排列，若人数相同，按课程号升序排列","index":"6.38"},{"title":"45 查询选修了全部课程的学生信息","id":"45-查询选修了全部课程的学生信息","index":"6.39"},{"title":"46 查询各学生的年龄","id":"46-查询各学生的年龄","index":"6.40"},{"title":"47 查询本周过生日的学生","id":"47-查询本周过生日的学生","index":"6.41"},{"title":"48 查询下周过生日的学生","id":"48-查询下周过生日的学生","index":"6.42"},{"title":"49 查询本月过生日的学生","id":"49-查询本月过生日的学生","index":"6.43"},{"title":"50 查询12月份过生日的学生","id":"50-查询12月份过生日的学生","index":"6.44"}]}]}